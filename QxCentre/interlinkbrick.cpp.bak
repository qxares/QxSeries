#include "interlinkbrick.h"
#include <QDebug>

InterlinkBrick::InterlinkBrick(QWidget *parentWidget, QObject *parent)
    : QObject(parent), parentWidget(parentWidget) {
    qDebug() << "InterlinkBrick initialized";
}

void InterlinkBrick::launchAppWindow(QWidget *window) {
    if (!appWindows.contains(window)) {
        appWindows.append(window);
        qDebug() << "Registered app window: " << window->windowTitle();
    }
    window->show();
    raiseAppWindows(); // Raise all child apps to keep them grouped
    qDebug() << "Launched app window: " << window->windowTitle();
}

void InterlinkBrick::raiseAppWindows() {
    parentWidget->lower(); // Ensure QxCentre stays behind
    for (QWidget *window : appWindows) {
        if (window && !window->isHidden()) {
            window->raise(); // Raise each child app
        }
    }
}
